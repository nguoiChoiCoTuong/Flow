<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Flow</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="icon" href="images/sea-waves.png" type="image/png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      height: 100vh;
      background-color: skyblue;
    }

    #weather-info {
      width: 35%;
      padding: 20px;
      background: #f9f9f9;
      overflow-y: auto;
      background-color: skyblue;
    }

    #map {
      flex: 1;
    }

    .card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      padding: 15px;
      margin-bottom: 20px;
    }

    .forecast-day {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 0;
      border-bottom: 1px solid #eee;
    }

    .forecast-day:last-child {
      border-bottom: none;
    }
  </style>
</head>

<body>
  <div id="weather-info">
    <div class="card">
      <h2 id="city-name">Ha Noi</h2>
      <p id="desc">---</p>
      <p><i class="fa-solid fa-temperature-high" style="color: gray"></i>
        <b>Temperature:</b><span id="temp">-- ¬∞C</span>
      </p>
      <p><i class="fa-solid fa-water" style="color: blue"></i>
        <b>Humidity:</b> <span id="humidity">--%</span>
      </p>
      <p><i class="fa-solid fa-wind" style="color: green"></i>
        <b>Wind:</b> <span id="wind">-- km/h</span>
      </p>
      <p><i class="fa-solid fa-eye" style="color: purple"></i>
        <b>Visibility:</b> <span id="visibility">-- km</span>
      </p>
    </div>

    <div class="card">
      <h3>5-Day Forecast</h3>
      <div id="forecast-container"></div>
    </div>
    <div class="card">
      <h3>Advice</h3>
      <ul id="advice-list"></ul>
    </div>
  </div>

  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // T·∫°o map
    var map = L.map("map").setView([16, 107], 5);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: "¬© OpenStreetMap"
    }).addTo(map);

    // D·ªØ li·ªáu tƒ©nh cho demo
    const weatherData = {
      "Hanoi": {
        current: { temp: "28¬∞C", desc: "‚òÄÔ∏è Clear Sky", humidity: "70%", wind: "8 km/h", visibility: "10 km" },
        forecast: [
          { day: "Today", icon: "‚òÄÔ∏è", min: 24, max: 30 },
          { day: "Tomorrow", icon: "‚õÖ", min: 23, max: 29 },
          { day: "Wednesday", icon: "üåßÔ∏è", min: 21, max: 27 },
          { day: "Thursday", icon: "‚òÄÔ∏è", min: 20, max: 26 },
          { day: "Friday", icon: "‚õÖ", min: 22, max: 28 }
        ]
      },
      "Ho Chi Minh": {
        current: { temp: "32¬∞C", desc: "‚õÖ Partly Cloudy", humidity: "65%", wind: "10 km/h", visibility: "12 km" },
        forecast: [
          { day: "Today", icon: "‚õÖ", min: 26, max: 34 },
          { day: "Tomorrow", icon: "‚òÄÔ∏è", min: 25, max: 33 },
          { day: "Wednesday", icon: "üåßÔ∏è", min: 24, max: 32 },
          { day: "Thursday", icon: "üå©Ô∏è", min: 25, max: 34 },
          { day: "Friday", icon: "‚òÄÔ∏è", min: 26, max: 35 }
        ]
      },
      "Da Nang": {
        current: { temp: "30¬∞C", desc: "‚òÄÔ∏è Sunny", humidity: "68%", wind: "12 km/h", visibility: "9 km" },
        forecast: [
          { day: "Today", icon: "‚òÄÔ∏è", min: 25, max: 31 },
          { day: "Tomorrow", icon: "‚õÖ", min: 24, max: 30 },
          { day: "Wednesday", icon: "üåßÔ∏è", min: 23, max: 29 },
          { day: "Thursday", icon: "‚òÄÔ∏è", min: 24, max: 31 },
          { day: "Friday", icon: "‚õÖ", min: 25, max: 32 }
        ]
      },
      "Can Tho": {
        current: { temp: "29¬∞C", desc: "üåßÔ∏è Light Rain", humidity: "75%", wind: "7 km/h", visibility: "8 km" },
        forecast: [
          { day: "Today", icon: "üåßÔ∏è", min: 24, max: 30 },
          { day: "Tomorrow", icon: "‚õÖ", min: 23, max: 29 },
          { day: "Wednesday", icon: "‚òÄÔ∏è", min: 22, max: 28 },
          { day: "Thursday", icon: "üå©Ô∏è", min: 23, max: 29 },
          { day: "Friday", icon: "üåßÔ∏è", min: 24, max: 30 }
        ]
      }
    };

    // H√†m update UI
    function updateWeather(city) {
      const data = weatherData[city];

      document.getElementById("city-name").innerText = city;
      document.getElementById("temp").innerText = data.current.temp;
      document.getElementById("desc").innerText = data.current.desc;
      document.getElementById("humidity").innerText = data.current.humidity;
      document.getElementById("wind").innerText = data.current.wind;
      document.getElementById("visibility").innerText = data.current.visibility;

      // Advice
      const adviceListElem = document.getElementById("advice-list");
      adviceListElem.innerHTML = "";
      const tempValue = parseInt(data.current.temp);
      const advices = generateAdvice(
        tempValue,
        data.current.desc,
        data.current.humidity,
        data.current.wind
      );
      advices.forEach(a => {
        const li = document.createElement("li");
        li.textContent = a;
        adviceListElem.appendChild(li);
      });

      // Forecast
      const forecastContainer = document.getElementById("forecast-container");
      forecastContainer.innerHTML = "";
      data.forecast.forEach(f => {
        const div = document.createElement("div");
        div.className = "forecast-day";
        div.innerHTML = `<span>${f.icon} ${f.day}</span><span>${f.min}¬∞ - ${f.max}¬∞</span>`;
        forecastContainer.appendChild(div);
      });
    }

    //H√†m t·∫°o l·ªùi khuy√™n
    function generateAdvice(temp, desc, humidity, wind) {
      const adviceList = [];
      // Temperature
      if (temp < 0) adviceList.push("ü•∂ It's freezing! Wear multiple layers, a warm coat, hat, and gloves.");
      else if (temp < 10) adviceList.push("üß• It's cold. A jacket or sweater is recommended.");
      else if (temp > 30) adviceList.push("üî• It's very hot. Wear light clothing and apply sunscreen.");
      else if (temp > 25) adviceList.push("üòé Nice weather! Light clothing will be comfortable.");

      // Condition
      if (desc.includes("Rain") || desc.includes("üåßÔ∏è")) adviceList.push("‚òî Don't forget your umbrella and waterproof shoes.");
      if (desc.includes("Snow") || desc.includes("‚ùÑÔ∏è")) adviceList.push("‚ö†Ô∏è Slippery roads. Wear non-slip shoes and be careful.");
      if (desc.includes("Clear") || desc.includes("‚òÄÔ∏è")) adviceList.push("üï∂Ô∏è Great day! Sunglasses are recommended.");

      // Wind
      const windValue = parseInt(wind);
      if (windValue > 25) adviceList.push("üí® Strong winds today. Secure loose items and be careful with umbrellas.");
      else if (windValue > 15) adviceList.push("üçÉ Moderate winds. A light jacket may help with wind chill.");

      // Humidity
      const humValue = parseInt(humidity);
      if (humValue > 80) adviceList.push("üíß High humidity. It may feel warmer than the actual temperature.");

      return adviceList;
    }


    // T·∫°o marker
    const cities = {
      "Hanoi": [21.0285, 105.8542],
      "Ho Chi Minh": [10.7769, 106.7009],
      "Da Nang": [16.0471, 108.2068],
      "Can Tho": [10.0452, 105.7469]
    };

    for (let city in cities) {
      L.marker(cities[city]).addTo(map).on("click", () => updateWeather(city));
    }

    // Load m·∫∑c ƒë·ªãnh H√† N·ªôi
    updateWeather("Hanoi");
  </script>
</body>

</html>

